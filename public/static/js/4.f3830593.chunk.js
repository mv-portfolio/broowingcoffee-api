(this["webpackJsonpcapstone-web-server"]=this["webpackJsonpcapstone-web-server"]||[]).push([[4],{101:function(e,t,n){e.exports={mainPane:"_mainPane__1pI_B",logoPane:"_logoPane__18PO-",logo:"_logo__2tYNi",topPane:"_topPane__1yILb",headerPane:"_headerPane__2iAO8",title:"_title__2-0eV",subtitle:"_subtitle__2E3rC",bodyPane:"_bodyPane__1Tilv",contentPane:"_contentPane__23k16",text:"_text__ibtX-",bottomPane:"_bottomPane__1fy7X",propertyPane:"_propertyPane__J61xh",subtext:"_subtext__2Urcd",footerPane:"_footerPane__4Yqkd",horizontalLine:"_horizontalLine__3NGZF",devLogo:"_devLogo__37vW7"}},102:function(e,t,n){e.exports={mainPane:"_mainPane__1Hpaq",topPane:"_topPane__1-v8Q",name:"_name__5G_KQ",price:"_price__1eTu2",bodyPane:"_bodyPane__2n-bZ",addons:"_addons__2jvNE",propertyPane:"_propertyPane__2zH_h",propertyName:"_propertyName__d0PnG",propertyValue:"_propertyValue__3Wvo5",propertyPaneAddons:"_propertyPaneAddons__HbW3K"}},103:function(e,t,n){e.exports={mainPane:"_mainPane__1ykwL"}},104:function(e,t){e.exports=function(e){return[{"TXN ID":e.txnId},{"TXN DISCOUNT":e.txnDiscount},{"DATE ISSUED":e.dateIssued},{TAX:e.tax},{SUBTOTAL:e.subtotal},{TOTAL:e.total}]}},77:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var r=n(81),a=n(0),o=n(2),c=n.p+"static/media/logo.47aff3b4.png",s=(n.p,n(94)),i=n(79),u=n(10),d=n(93),l=n(101),p=n.n(l),y=n(19);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toName",value:function(e){var t="",n="",r="",a=e.replace(/\s+/g," ").trim(),o=a.indexOf(" "),c=a.indexOf(" ",o+1);return c>0?(r=a.substring(c+1,c+2).toUpperCase()+a.substring(c+2).toLowerCase(),n=a.substring(o+1,o+2).toUpperCase()+a.substring(o+2,c).toLowerCase(),t=a.substring(0,1).toUpperCase()+a.substring(1,o).toLowerCase()):o>0?(n=a.substring(o+1,o+2).toUpperCase()+a.substring(o+2).toLowerCase(),t=a.substring(0,1).toUpperCase()+a.substring(1,o).toLowerCase()):t=a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase(),"".concat(t," ").concat(n," ").concat(r).trim()}},{key:"toMoney",value:function(e){return parseFloat(e).toFixed(2)}},{key:"toNumber",value:function(e){return parseInt(e)}},{key:"toTime",value:function(e){var t,n,r=new Date(e),a="";return a=r.getHours(),t=r.getMinutes(),n=a>=12?"PM":"AM",a=(a%=12)||12,this.numberFormatter(a)+":"+this.numberFormatter(t)+" "+n}},{key:"toDate",value:function(e){var t,n,r,a=new Date(e);return t=this.monthTerm(a),n=a.getDate(),r=a.getFullYear(),"".concat(t," ").concat(n," ").concat(r)}},{key:"toExactDate",value:function(e){return new Date(this.toDate(e)).getTime()}},{key:"toLocaleString",value:function(e){var t,n,r,a,o=new Date(e);return t=this.dayTerm(o),n=this.monthTerm(o),r=o.getDate(),a=o.getFullYear(),"".concat(t,", ").concat(n," ").concat(r," ").concat(a)}},{key:"getDateDifference",value:function(e){var t,n,r,a=new Date,o=new Date(e),c="";t=o.toLocaleDateString(),c=o.getHours(),n=o.getMinutes(),r=c>12?"PM":"AM",c=(c%=12)||12;var s=a.getTime()-o;return s>=0&&s<6e4?"Now":s>=6e4&&s<36e5?s<12e4?Math.round(s/6e4)+" minute ago":Math.round(s/6e4)+" minutes ago":s>=36e5&&s<864e5?s<72e5?Math.round(s/36e5)+" hour ago":Math.round(s/36e5)+" hours ago":s>=864e5&&s<1728e5?"Yesterday at "+this.numberFormatter(c)+":"+this.numberFormatter(n)+" "+r:t+" - "+this.numberFormatter(c)+":"+this.numberFormatter(n)+" "+r}},{key:"getDayGreeting",value:function(){var e=new Date;return e.getHours()>17?"Good Evening":e.getHours()>11?"Good Afternoon":e.getHours()>=0?"Good Morning":void 0}},{key:"numberFormatter",value:function(e){return e<10?"0"+e:e}},{key:"dayTerm",value:function(e){var t;return 0===e.getDay()?t="Sunday":1===e.getDay()?t="Monday":2===e.getDay()?t="Tuesday":3===e.getDay()?t="Wednesday":4===e.getDay()?t="Thursday":5===e.getDay()?t="Friday":6===e.getDay()&&(t="Saturday"),t}},{key:"monthTerm",value:function(e){var t;return 0===e.getMonth()?t="January":1===e.getMonth()?t="February":2===e.getMonth()?t="March":3===e.getMonth()?t="April":4===e.getMonth()?t="May":5===e.getMonth()?t="June":6===e.getMonth()?t="July":7===e.getMonth()?t="August":8===e.getMonth()?t="September":9===e.getMonth()?t="October":10===e.getMonth()?t="November":11===e.getMonth()&&(t="December"),t}}],(n=null)&&b(t.prototype,n),r&&b(t,r),e}(),f=function(e){var t=[];return Object.keys(e).forEach((function(n,r){Object.values(e).forEach((function(e,a){r===a&&t.push({property:n,value:e})}))})),t},g=function(e,t){var n=[],r=e,a={},o=Object.values(t),c=function(e){var t=Object.getOwnPropertyNames(e);return Object.values(e).forEach((function(e){if("object"===typeof e){var r=Object.getOwnPropertyNames(e);t.forEach((function(e){r.forEach((function(t){if(e===t){if(0===n.length)return n.push(e);var r=!1;return n.forEach((function(e){e===t&&(r=!0)})),r?void 0:n.push(e)}}))}))}})),n}(t);return Array.isArray(r)||(r=Object.keys(r)),r.forEach((function(e){Object.getOwnPropertyNames(t).forEach((function(t,n){if(e===t&&(a[t]=o[n]),"object"===typeof o[n]){var r=o[n],s=Object.values(r);Object.getOwnPropertyNames(r).forEach((function(t,n){if(e===t){var r=!1;c.forEach((function(e){if(e===t)return r=!0})),r||(a[t]=s[n])}}))}}))})),a},j=function(e,t){var n=0,r=t.discount,a=t.price,o=t.addons,c=t.copied,s=function(){var e=0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return e+=t.price})),e}(o);return n+=s+a,r&&(n-=r/100*n),h.toMoney(n*(e?1:c))},m=n(78),_=n(102),v=n.n(_),O=n(1),x=["isShow","defaultStyle","onClick"];function P(e){var t=e.isShow,n=void 0===t||t,r=e.defaultStyle,a=e.onClick,o=Object(m.a)(e,x),c=f(o).filter((function(e){return"name"!==e.property})).filter((function(e){return"copied"!==e.property})),s=function(e,t){return e.includes("price")?"".concat(h.toMoney(t)):e.includes("date")?"".concat(h.getDateDifference(t)):e.includes("discount")?"".concat(t,"%"):t};return Object(O.jsxs)(i.g,{style:v.a.mainPane,defaultStyle:r,onClick:a,children:[Object(O.jsxs)(i.g,{style:v.a.topPane,children:[Object(O.jsx)(i.e,{style:v.a.name,children:"".concat(h.toName(o.name)," ").concat(n||o.copied-1<=0?"":"x ".concat(o.copied))}),Object(O.jsx)(i.e,{style:v.a.price,children:j(n,o)})]}),n&&Object(O.jsx)(i.g,{style:v.a.bodyPane,children:c.map((function(e,t){var n=e.property,r=e.value;return Array.isArray(r)?r.length<=0?null:Object(O.jsxs)(i.g,{children:[Object(O.jsx)(i.d,{vertical:.5}),Object(O.jsx)(i.e,{style:v.a.addons,children:"add-ons"}),o.addons.map((function(e,t){return Object(O.jsxs)(i.g,{style:v.a.propertyPaneAddons,children:[Object(O.jsxs)(i.e,{style:v.a.propertyName,children:["- ",e.name]}),Object(O.jsx)(i.e,{style:v.a.propertyValue,children:h.toMoney(e.price)})]},t)}))]},t):Object(O.jsxs)(i.g,{style:v.a.propertyPane,children:[Object(O.jsx)(i.e,{style:v.a.propertyName,children:n}),Object(O.jsx)(i.e,{style:v.a.propertyValue,children:s(n,r)})]},t)}))})]})}var w=n(103),D=n.n(w);function M(e){var t=e.products,n=void 0===t?[]:t,o=Object(a.useState)({index:0,isShow:!1}),c=Object(r.a)(o,2),s=c[0],u=c[1];return Object(O.jsx)(i.g,{style:D.a.mainPane,children:n.map((function(e,t){return Object(O.jsx)(P,Object(y.a)({isShow:s.index==t&&s.isShow,defaultStyle:{marginBottom:t+1!==n.length?"1vh":"0"},onClick:function(){return function(e){u((function(t){return t.index===e?{index:e,isShow:!t.isShow}:{index:e,isShow:!0}}))}(t)}},e),t)}))})}var k=n(104);function S(){var e=Object(o.g)().token,t=Object(a.useReducer)(s.a,s.b),n=Object(r.a)(t,2),l=n[0],b=n[1],m=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){return g(e,t)})),n=[],r=0;return t.forEach((function(e,t){n.filter((function(t){var n=t.name,r=t.discount,a=t.type,o=t.price,c=t.based,s=t.addons;return n===e.name&&r===e.discount&&a===e.type&&o===e.price&&c===e.based&&s.length===e.addons.length}))[0]?(r+=1,n=n.map((function(t){var n=t.name,a=t.discount,o=t.type,c=t.price,s=t.based,i=t.addons,u=t.copied;return n===e.name&&a===e.discount&&o===e.type&&c===e.price&&s===e.based&&i.length===e.addons.length?{name:n,discount:a,type:o,price:c,based:s,addons:i,copied:r}:{name:n,discount:a,type:o,price:c,based:s,addons:i,copied:u}}))):(r=1,n.push(Object(y.a)(Object(y.a)({},e),{},{copied:r})))})),n}(["name","discount","type","price","based","addons"],l.payload.products)||[],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=0;return e.forEach((function(e){n+=parseFloat(j(!0,e))})),n-n*(t/100)},v=_(l.payload.products,l.payload.discount),x=function(e,t){return parseFloat((e*(t/100)).toFixed(2))}(_(l.payload.products,l.payload.discount),0);return Object(a.useEffect)((function(){d.a.peek("/transaction-receipt",{timeout:7e3,headers:{"receipt-auth-token":e}}).then((function(e){var t=e.res;b({type:"set",authRequest:"success",payload:t})})).catch((function(e){b({type:"set",authRequest:"failed"})}))}),[]),"success"===l.authRequest?Object(O.jsxs)(i.g,{style:p.a.mainPane,children:[Object(O.jsx)(i.g,{style:p.a.logoPane,children:Object(O.jsx)(i.c,{style:p.a.logo,source:c})}),Object(O.jsx)(i.g,{style:p.a.topPane,children:Object(O.jsxs)(i.g,{style:p.a.headerPane,children:[Object(O.jsx)(i.e,{style:p.a.title,children:"Your e-Receipt"}),Object(O.jsx)(i.d,{vertical:.5}),Object(O.jsx)(i.e,{style:p.a.subtitle,children:"Thank you for purchasing our products, you may used this receipt for any case of issue on your recent transaction"})]})}),Object(O.jsx)(i.g,{style:p.a.bodyPane,children:Object(O.jsxs)(i.g,{style:p.a.contentPane,children:[Object(O.jsxs)(i.g,{style:p.a.headerPane,children:[Object(O.jsx)(i.e,{style:p.a.text,children:"Item".concat(m.length>1?"s":"")}),Object(O.jsx)(i.e,{style:p.a.text,children:"Computed Price"})]}),Object(O.jsx)(i.d,{vertical:.5}),Object(O.jsx)(M,{products:m})]})}),Object(O.jsx)(i.g,{style:p.a.bottomPane,children:Object(O.jsx)(i.g,{style:p.a.contentPane,children:k({txnId:l.payload._id,txnDiscount:l.payload.discount,dateIssued:h.getDateDifference(l.payload.date_created),tax:x,subtotal:h.toMoney(v),total:h.toMoney(v+x)}).map((function(e,t){var n=f(e)[0],r=n.property,a=n.value;return Object(O.jsxs)(i.g,{style:p.a.propertyPane,children:[Object(O.jsx)(i.e,{style:p.a.text,children:r}),Object(O.jsx)(i.e,{style:p.a.subtext,children:a})]},t)}))})}),Object(O.jsxs)(i.g,{style:p.a.footerPane,children:[Object(O.jsx)(i.g,{style:p.a.horizontalLine}),Object(O.jsx)(i.c,{style:p.a.devLogo,source:"https://petatemarvin26.github.io/static/media/my-logo.aba1892c.png"})]})]}):"failed"===l.authRequest?Object(O.jsx)(u.a,{}):Object(O.jsx)(u.c,{})}},78:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=4.f3830593.chunk.js.map