{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Makaru\\\\Documents\\\\React Project\\\\broowingcoffee-web-server\\\\src\\\\pages\\\\ResetPassword\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { ErrorPage, LoadingPage } from 'pages';\nimport { SECRET_KEY, SERVER } from 'utils/env';\nimport { Text, TextInput, View, Separator, Button, Icon } from 'components';\nimport styles from './.module.css';\nimport { resetPassword as resetPasswordReducer, resetPasswordInitState } from 'hooks';\nimport { hasLetter, hasLowerCaseLetter, hasNumber, hasSymbol, hasUpperCaseLetter } from 'utils/checker';\nimport { ACCENT_COLOR } from 'constants/colors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function HomePage() {\n  _s();\n\n  const {\n    token\n  } = useParams();\n  const [state, setState] = useReducer(resetPasswordReducer, resetPasswordInitState);\n  useEffect(() => {\n    fetch(`${SERVER}/${SECRET_KEY}/api/service/reset-password-auth`, {\n      headers: {\n        'reset-auth-token': token\n      }\n    }).then(res => res.json()).then(res => {\n      if (!res.status) {\n        setState({\n          type: 'set',\n          request: 'failed'\n        });\n        return;\n      }\n\n      const {\n        res: {\n          email\n        }\n      } = res;\n      setState({\n        type: 'set',\n        request: 'success',\n        email\n      });\n    });\n  }, []);\n\n  const strength = val => {\n    let strength = 0;\n\n    if (hasUpperCaseLetter(val)) {\n      if (val.length > 2) {\n        strength += 15;\n      }\n\n      strength += 10;\n    }\n\n    if (hasLowerCaseLetter(val)) {\n      if (val.length > 4) {\n        strength += 15;\n      }\n\n      strength += 10;\n    }\n\n    if (hasSymbol(val)) {\n      if (val.length > 6) {\n        strength += 15;\n      }\n\n      strength += 10;\n    }\n\n    if (hasNumber(val)) {\n      if (val.length > 8) {\n        strength += 15;\n      }\n\n      strength += 10;\n    }\n\n    return strength;\n  };\n\n  const onChangeText = (component, val) => {\n    if (component === 'new-password') {\n      setState({\n        type: 'set',\n        newPassword: val,\n        passwordStrength: strength(val),\n        isMatched: val === state.confirmPassword\n      });\n      return;\n    }\n\n    if (component === 'confirm-password') {\n      setState({\n        type: 'set',\n        confirmPassword: val,\n        isMatched: val === state.newPassword\n      });\n      return;\n    }\n  };\n\n  const onClickChange = () => {\n    console.log(state);\n  };\n\n  if (state.request === 'success') {\n    return /*#__PURE__*/_jsxDEV(View, {\n      style: styles.mainPane,\n      children: [/*#__PURE__*/_jsxDEV(View, {\n        style: styles.topPane,\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          style: styles.title,\n          children: \"New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Separator, {\n          vertical: 0.25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          style: styles.subtitle,\n          children: \"Please be sure, the password you enter was not leaked to anyone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Separator, {\n        vertical: 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(View, {\n        style: styles.bodyPane,\n        children: [/*#__PURE__*/_jsxDEV(TextInput, {\n          prefixComponent: /*#__PURE__*/_jsxDEV(Icon, {\n            font: \"Feather\",\n            name: \"lock\",\n            size: \"2.75vh\",\n            color: ACCENT_COLOR\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this),\n          skinStyle: styles.inputSkin,\n          placeholder: \"New Password\",\n          showIndicator: true,\n          indicatorProgress: state.passwordStrength,\n          isTextEncrypt: state.isEncrypt,\n          value: state.newPassword,\n          onChangeText: text => onChangeText('new-password', text)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Separator, {\n          vertical: 0.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n          skinStyle: styles.inputSkin,\n          placeholder: \"Confirm Password\",\n          isTextEncrypt: state.isEncrypt,\n          onTextEncrypt: () => setState({\n            type: 'set',\n            isEncrypt: !state.isEncrypt\n          }),\n          value: state.confirmPassword,\n          onChangeText: text => onChangeText('confirm-password', text)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Separator, {\n          vertical: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: styles.button,\n          title: \"Change\",\n          onClick: onClickChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (state.request === 'failed') {\n    return /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 10\n  }, this);\n}\n\n_s(HomePage, \"pXIESGqYZoaA0ADLE+oUlXLJkPA=\", false, function () {\n  return [useParams];\n});\n\n_c = HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["C:/Users/Makaru/Documents/React Project/broowingcoffee-web-server/src/pages/ResetPassword/index.js"],"names":["useEffect","useReducer","useState","useParams","ErrorPage","LoadingPage","SECRET_KEY","SERVER","Text","TextInput","View","Separator","Button","Icon","styles","resetPassword","resetPasswordReducer","resetPasswordInitState","hasLetter","hasLowerCaseLetter","hasNumber","hasSymbol","hasUpperCaseLetter","ACCENT_COLOR","HomePage","token","state","setState","fetch","headers","then","res","json","status","type","request","email","strength","val","length","onChangeText","component","newPassword","passwordStrength","isMatched","confirmPassword","onClickChange","console","log","mainPane","topPane","title","subtitle","bodyPane","inputSkin","isEncrypt","text","button"],"mappings":"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","sourcesContent":["import {useEffect, useReducer, useState} from 'react';\r\nimport {useParams} from 'react-router';\r\nimport {ErrorPage, LoadingPage} from 'pages';\r\nimport {SECRET_KEY, SERVER} from 'utils/env';\r\nimport {Text, TextInput, View, Separator, Button, Icon} from 'components';\r\nimport styles from './.module.css';\r\nimport {resetPassword as resetPasswordReducer, resetPasswordInitState} from 'hooks';\r\nimport {\r\n  hasLetter,\r\n  hasLowerCaseLetter,\r\n  hasNumber,\r\n  hasSymbol,\r\n  hasUpperCaseLetter,\r\n} from 'utils/checker';\r\nimport {ACCENT_COLOR} from 'constants/colors';\r\n\r\nexport default function HomePage() {\r\n  const {token} = useParams();\r\n  const [state, setState] = useReducer(resetPasswordReducer, resetPasswordInitState);\r\n\r\n  useEffect(() => {\r\n    fetch(`${SERVER}/${SECRET_KEY}/api/service/reset-password-auth`, {\r\n      headers: {'reset-auth-token': token},\r\n    })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        if (!res.status) {\r\n          setState({type: 'set', request: 'failed'});\r\n          return;\r\n        }\r\n        const {\r\n          res: {email},\r\n        } = res;\r\n        setState({type: 'set', request: 'success', email});\r\n      });\r\n  }, []);\r\n\r\n  const strength = val => {\r\n    let strength = 0;\r\n    if (hasUpperCaseLetter(val)) {\r\n      if (val.length > 2) {\r\n        strength += 15;\r\n      }\r\n      strength += 10;\r\n    }\r\n    if (hasLowerCaseLetter(val)) {\r\n      if (val.length > 4) {\r\n        strength += 15;\r\n      }\r\n      strength += 10;\r\n    }\r\n    if (hasSymbol(val)) {\r\n      if (val.length > 6) {\r\n        strength += 15;\r\n      }\r\n      strength += 10;\r\n    }\r\n    if (hasNumber(val)) {\r\n      if (val.length > 8) {\r\n        strength += 15;\r\n      }\r\n      strength += 10;\r\n    }\r\n    return strength;\r\n  };\r\n  const onChangeText = (component, val) => {\r\n    if (component === 'new-password') {\r\n      setState({\r\n        type: 'set',\r\n        newPassword: val,\r\n        passwordStrength: strength(val),\r\n        isMatched: val === state.confirmPassword,\r\n      });\r\n      return;\r\n    }\r\n    if (component === 'confirm-password') {\r\n      setState({\r\n        type: 'set',\r\n        confirmPassword: val,\r\n        isMatched: val === state.newPassword,\r\n      });\r\n      return;\r\n    }\r\n  };\r\n\r\n  const onClickChange = () => {\r\n    console.log(state);\r\n  };\r\n\r\n  if (state.request === 'success') {\r\n    return (\r\n      <View style={styles.mainPane}>\r\n        <View style={styles.topPane}>\r\n          <Text style={styles.title}>New Password</Text>\r\n          <Separator vertical={0.25} />\r\n          <Text style={styles.subtitle}>\r\n            Please be sure, the password you enter was not leaked to anyone\r\n          </Text>\r\n        </View>\r\n        <Separator vertical={2} />\r\n        <View style={styles.bodyPane}>\r\n          <TextInput\r\n            prefixComponent={\r\n              <Icon font='Feather' name='lock' size='2.75vh' color={ACCENT_COLOR} />\r\n            }\r\n            skinStyle={styles.inputSkin}\r\n            placeholder='New Password'\r\n            showIndicator={true}\r\n            indicatorProgress={state.passwordStrength}\r\n            isTextEncrypt={state.isEncrypt}\r\n            value={state.newPassword}\r\n            onChangeText={text => onChangeText('new-password', text)}\r\n          />\r\n          <Separator vertical={0.5} />\r\n          <TextInput\r\n            skinStyle={styles.inputSkin}\r\n            placeholder='Confirm Password'\r\n            isTextEncrypt={state.isEncrypt}\r\n            onTextEncrypt={() => setState({type: 'set', isEncrypt: !state.isEncrypt})}\r\n            value={state.confirmPassword}\r\n            onChangeText={text => onChangeText('confirm-password', text)}\r\n          />\r\n          <Separator vertical={1} />\r\n          <Button style={styles.button} title='Change' onClick={onClickChange} />\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (state.request === 'failed') {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  return <LoadingPage />;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}